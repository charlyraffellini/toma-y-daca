package controllers;

import com.googlecode.objectify.Objectify;
import com.googlecode.objectify.ObjectifyService;
import homes.UserHome;
import models.domain.User;
import ninja.session.Session;

import java.util.List;

/**
 * Created by Palumbo on 29/09/2014.
 */
public abstract class WebApiController {
    protected Session session;
    protected UserHome userHome;

    protected WebApiController(Session session, UserHome userHome) {
        this.session = session;
        this.userHome = userHome;
    }

<<<<<<< HEAD
    protected User getUser() { //TODO: Poner este mÃ©todo en la Session.
=======
    protected User getUser() { //TODO: Poner este metodo en la Session.
//        int userId = 3;
>>>>>>> 8f296826162593400b4c13281b55174968faa0cf
        int userId = (int)Integer.parseInt(session.get("userId"));
        return this.userHome.get(userId);
    }

    protected List<User> getUsers() { //TODO: Poner este metodo en la Session.
        Objectify ofy = ObjectifyService.ofy();
        return ofy.load().type(User.class).list();
    }
}
